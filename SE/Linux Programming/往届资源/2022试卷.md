往年的考试题参见[zhy学长的仓库](https://spricoder.github.io/categories/)。

## 2022 Linux程序设计回忆

> wyh 2022.5.5

回想了一下重点歪了不少，还是建议大家地毯式复习。

1. 字符设备驱动程序的初始化加载过程？用了什么系统调用，有哪些参数？怎么创建字符设备驱动？(20分)

2. 解释重定向符：>、>>、2>、&>（10分）

   ```
   :将命令的输出重定向到指定的文件中，相当于将命令的输出打印到文件中。例如，命令:ls 的输出会被重定向到一个名为 output.txt 的文件中:
   
   ls > output.txt  
   :将命令的输出追加到指定的文件中，相当于将命令的输出追加到文件中。例如，命令:ls 的输出会被追加到名为 output.txt 的文件中:
   
   ls >> output.txt  
   2>:将命令的输出重定向到标准错误流 (stderr) 中，相当于将命令的输出打印到标准错误流中。例如，命令:ls 的输出会被重定向到标准错误流中:
   
   ls 2> error.txt  
   &>:将命令的输出重定向到指定的文件中，同时退出命令。例如，命令:ls &> 中的 &> 表示将 ls 的输出重定向到 output.txt 文件中，同时退出命令
   ```

3. VFS模型是什么？它的作用是什么？打开文件会创建哪些对象？它们的作用都是什么？（10分）

   ```
   VFS(Virtual File System) 模型是一种在操作系统中用于管理文件系统的数据结构模型。它的作用是提供一个虚拟的文件系统，让操作系统可以将文件看作是一个连续的磁盘块，而这些磁盘块可以由操作系统进行读写操作。
   
   在 VFS 模型中，打开文件会创建以下对象:
   
   文件指针：文件指针是一个指向文件数据结构中特定位置的指针。当文件被打开时，操作系统会创建一个文件指针对象，该对象用于指向文件的数据结构中的位置。
   
   文件描述符：文件描述符是一个整数，用于标识一个打开的文件。当操作系统创建一个文件时，它会创建一个新的文件描述符，并且每个文件描述符都是唯一的。
   
   文件操作指针：文件操作指针是一个整数，用于标识一个文件操作。当操作系统需要执行一个文件操作时，它会将文件操作指针指向相应的文件操作函数。
   
   文件状态：文件状态是一个整数，用于表示文件的打开状态和文件属性。文件状态可以用来判断文件是否被锁定，是否被共享，以及文件的元数据 (如文件大小，创建日期等)。
   
   文件数据结构：文件数据结构是一个数据结构，用于表示文件的数据。在 VFS 模型中，文件数据结构通常是一个链表，链表中的每个节点表示文件的一个块。
   
   这些对象一起构成了 VFS 模型，它们的作用是让操作系统能够读写文件数据，并且能够在不同的文件系统中进行文件操作。打开文件后，操作系统会将这些对象分配给文件指针，文件描述符，文件操作指针和文件状态，并且将它们保存在一个数据结构中，以便后续文件操作。
   ```

4. 编程题（35分）

   一页的程序，让你读。还有一个makefile。

   1. 源代码是用C函数还是系统调用写的？
   2. 通过makefile来看，源代码实现了什么功能？
   3. 直接执行makefile编译不通过，为什么？怎么修改？
   4. 编译命令是什么？执行的命令是什么？解释一下对应的选项（gcc option）。
   5. 用户直接编译成main.exe可不可以运行？如果可以，给出理由。如果不可以，需要对源代码进行什么修改，为什么？

5. 华为的判断题（5分），不定向选择（10分），全是ppt的红色原话。